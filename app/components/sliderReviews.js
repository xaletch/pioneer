const sliderReview=document.querySelector(".reviews .wrapper"),itemsReview=document.querySelectorAll(".reviews-card"),dotsReview=document.querySelectorAll(".reviews_dots-item");let cardWidthReview=422,spacingReview=30,cloneFirst=itemsReview[0].cloneNode(!0),cloneLast=itemsReview[itemsReview.length-1].cloneNode(!0),lengthItemsReview=itemsReview.length,activeReview=2,isDraggingReview=!1,startPosReview=0,currentTranslateReview=0,prevTranslateReview=0,animationFrameId;function updateCardWidthReview(){screen.width<=760?cardWidthReview=350:screen.width<=480&&(cardWidthReview=340)}function reloadSliderReview(e=!0){e?sliderReview.style.transition="transform 0.4s ease-out":sliderReview.style.transition="none";let i=-(cardWidthReview+spacingReview)*activeReview;sliderReview.style.transform=`translateX(${i}px)`,0===activeReview&&setTimeout(()=>{sliderReview.style.transition="none",activeReview=lengthItemsReview;let e=-(cardWidthReview+spacingReview)*activeReview;sliderReview.style.transform=`translateX(${e}px)`},600),activeReview===lengthItemsReview+1&&setTimeout(()=>{sliderReview.style.transition="none",activeReview=1;let e=-(cardWidthReview+spacingReview)*activeReview;sliderReview.style.transform=`translateX(${e}px)`},600),updateDots()}function updateDots(){let e=document.querySelector(".reviews_dots-active");e&&e.classList.remove("reviews_dots-active");let i=activeReview%lengthItemsReview==0?0:activeReview%lengthItemsReview-1;dotsReview[i].classList.add("reviews_dots-active")}function debounce(e,i){let t;return function(){let r=this,n=arguments;clearTimeout(t),t=setTimeout(()=>e.apply(r,n),i)}}function throttle(e,i){let t;return function(){let r=arguments;t||(e.apply(this,r),t=!0,setTimeout(()=>t=!1,i))}}function getPositionX(e){return e.type.includes("mouse")?e.pageX:e.touches[0].clientX}function setSliderPosition(){sliderReview.style.transform=`translateX(${currentTranslateReview}px)`}function dragStart(e){isDraggingReview=!0,startPosReview=getPositionX(e),animationFrameId=requestAnimationFrame(animation),sliderReview.classList.add("grabbing")}function drag(e){if(isDraggingReview){let i=getPositionX(e);currentTranslateReview=prevTranslateReview+i-startPosReview,setSliderPosition()}}function dragEnd(){cancelAnimationFrame(animationFrameId),isDraggingReview=!1;let e=currentTranslateReview-prevTranslateReview;e<-100&&activeReview<itemsReview.length&&(activeReview+=1),e>100&&activeReview>0&&(activeReview-=1),setPositionByIndex(),sliderReview.classList.remove("grabbing")}function setPositionByIndex(){prevTranslateReview=currentTranslateReview=-(cardWidthReview+spacingReview)*activeReview,setSliderPosition(),reloadSliderReview()}function animation(){setSliderPosition(),isDraggingReview&&requestAnimationFrame(animation)}function scrollToReview(e){activeReview=e+1,setPositionByIndex()}sliderReview.insertBefore(cloneLast,sliderReview.firstChild),sliderReview.appendChild(cloneFirst),updateCardWidthReview(),window.addEventListener("resize",debounce(()=>{updateCardWidthReview(),reloadSliderReview()},250)),reloadSliderReview(!1),sliderReview.addEventListener("mousedown",dragStart),window.addEventListener("mouseup",dragEnd),sliderReview.addEventListener("touchstart",dragStart),window.addEventListener("touchend",dragEnd),window.addEventListener("mousemove",throttle(drag,1)),window.addEventListener("touchmove",throttle(drag,1)),dotsReview.forEach((e,i)=>{e.addEventListener("click",()=>scrollToReview(i))}),reloadSliderReview();